// 꿈 해몽 키워드 데이터 - 각 번호마다 관련된 키워드들을 매핑
export const dreamKeywords: Record<number, string[]> = {
  1: [
    "돈다발", "거북이", "봉투", "친구", "친정", "농사짓다", "참외",
    "내복", "떡", "고구마", "찌개", "김치", "후배", "닭", "목욕", "쌀", "채소", "햅쌀", "옥수수"
  ],
  2: [
    "호박", "닭고기", "배추", "신발", "청소", "병원", "남동생",
    "우체국", "조카", "국수", "모자", "부모님", "지갑", "결혼", "곶감", "가방", "국밥", "할머니"
  ],
  3: [
    "강아지", "늑대", "비둘기", "손님", "손주", "호랑이", "의사",
    "빨래", "국", "술", "약", "가지", "오이", "고추", "인삼", "프로포즈", "젓갈"
  ],
  4: [
    "편지", "귀걸이", "팔찌", "반지", "이불", "옷", "소주", "책",
    "옷감", "비닐", "드레스", "속옷", "옷장", "치마", "스타킹", "녹차", "양복", "벽지"
  ],
  5: [
    "목욕탕", "옷", "고기", "회집", "밥상", "술", "국물", "뜨거",
    "목욕", "돼지고기", "해물", "굴비", "생선", "도로", "비린내", "곰국"
  ],
  6: [
    "똥", "호박", "고추", "감", "옷", "해물", "논", "새집", "가지",
    "수박", "인삼", "고구마", "무", "포도", "오징어"
  ],
  7: [
    "개미", "드레스", "코드", "카드", "그네", "모자", "가지",
    "복권", "스타킹", "복부", "밤", "전화", "이불", "제사", "두부", "주유"
  ],
  8: [
    "소", "복권", "금", "자동차", "귀찌", "펄렁", "구멍",
    "주먹", "우물", "뉴스", "권투", "얼굴", "꿈", "피눈물", "귀신", "피몽", "얼음", "근육", "우유"
  ],
  9: [
    "수박", "요리", "분식", "시장", "제조", "배추", "꽃게",
    "대추", "만들다", "한의원", "감자", "식당", "지갑", "국밥", "전골", "수제비"
  ],
  10: [
    "고향탑", "손가락", "국대", "국물", "살다", "시장", "장보다", "싸고",
    "약사가", "밀가루", "녹차", "동네", "과일", "단무지", "전골", "시장", "지갑"
  ],
  11: [
    "저마다", "다리", "하이힐", "슈퍼마켓", "동네마트", "투표함",
    "동생", "돈봉투", "주머니", "수저", "무늬", "도느", "도크"
  ],
  12: [
    "녹용", "토스트", "고등어", "기차", "현금", "경기", "장갑다",
    "면접", "조카", "경찰", "이름", "손", "수건", "옥수수", "스테이크"
  ],
  13: [
    "도시락", "독립", "국수", "구석", "다섯", "숫자",
    "바나나", "양파", "유명", "고구마", "배", "자두", "고기", "식사", "물고기", "오징어", "물건"
  ],
  14: [
    "지중해", "놀라다", "국인", "전문가", "기록문서", "무료", "학생",
    "장화", "도시", "샤프펜", "청년", "화장실", "버금다", "미끌다", "비문"
  ],
  15: [
    "호박", "배추", "젊다", "국가", "장구", "도로", "던져", "선물",
    "티저", "다같이", "이불", "신부", "복권", "로또", "여자", "피부", "구두"
  ],
  16: [
    "인더", "내", "서울", "수술", "화약", "던지다", "운동장", "치유",
    "여러", "사수", "국회", "명함", "국문", "곡식", "국민", "점심"
  ],
  17: [
    "검다", "내림", "물건", "마음", "나무", "숲물", "기웃",
    "냄비", "명의", "기도", "모임", "그릇", "문", "극장", "주유", "고무줄"
  ],
  18: [
    "호수", "수중", "공다리", "무척", "구조대원", "누구", "무기",
    "도망", "무료", "한국", "제물", "목공소", "고사", "요기"
  ],
  19: [
    "매달리다", "외국", "금광산", "국립묘지", "제국", "무료", "국악",
    "수요", "고구려", "국화", "복권", "고물", "국가", "구기종목", "목련"
  ],
  20: [
    "대중", "복권", "많다", "숫자", "금값", "한국", "로또", "여러",
    "가마솥", "국가", "면접", "우주선", "자전거", "복지", "고수", "모기"
  ],
  21: [
    "소", "야채", "코주", "죽은", "여름", "육교",
    "우림", "스님", "제목", "국수", "오줌", "옷고름", "수줍", "명주"
  ],
  22: [
    "밭", "손무", "상무", "사무실", "슈퍼", "냐옹", "무서",
    "우유", "주소", "떡", "교회", "손가락", "아기", "효도", "조물락", "상여", "조수"
  ],
  23: [
    "곰국", "포수", "스무", "옷감", "무척", "한복", "토끼", "고도",
    "어린", "아들", "도박", "포화", "피하", "트라", "도모", "스", "소스"
  ],
  24: [
    "방", "밤낮", "숫자", "오다", "길다", "바다", "마귀",
    "고속버스", "간다", "기도", "물건", "농다", "무조건", "거미", "고리"
  ],
  25: [
    "선비", "주사기", "손님", "숲물", "숙모", "버니",
    "초상", "수건", "김치", "디아이트", "옷수", "모자", "고사리", "스프", "소리치", "수저"
  ],
  26: [
    "태풍", "돼지", "슈즈", "로또", "도로", "요구르트", "무서",
    "오수", "무릎", "기도", "모자", "오줌", "기린", "쌈, 쌈치", "설명", "서리"
  ],
  27: [
    "가마니", "이덤지", "여러", "극내", "손물", "게주", "넓다",
    "수소", "교복", "청소", "드물", "소리", "미치", "무녀", "코기"
  ],
  28: [
    "마차", "놀놀", "숫자", "무기", "두자리수", "도시",
    "반여자", "치킨", "싫다", "기도", "거꾸로", "무덤", "초코파이", "여러가", "손목"
  ],
  29: [
    "새기다", "지름", "술", "툴릭", "경찰", "곡걱", "설명",
    "초코", "안호", "너울", "고장기다", "쌀국, 극장", "자그가", "거기"
  ],
  30: [
    "정기", "냄비", "슈트리", "여러", "수", "흔드",
    "땅", "여러", "딩고", "스리거", "이구마", "시골마을", "스림"
  ],
  31: [
    "무당", "도와", "드경", "물고기", "가지", "똑똑", "가져",
    "소아", "도경", "메임", "고수", "파고다", "마", "고물", "물거품"
  ],
  32: [
    "국밥", "냉", "상낭", "선별", "엽기", "도움", "스라",
    "무릎", "소음", "교회", "순수", "부수", "사무", "목걸이", "조수"
  ],
  33: [
    "게", "검수", "낭포", "거무", "낙조", "별도", "국지",
    "근무원", "상다, 삶다, 고기", "거이, 국경", "수국", "물건", "곰국"
  ],
  34: [
    "건물", "봉투", "장물", "여도", "땅굴", "가구", "풀렸",
    "헌", "매", "경기대", "근대술", "마도", "곳물", "관리", "마마주"
  ],
  35: [
    "김", "토스", "여렵", "팔국", "솔로", "감자", "원기,", "코로스",
    "스키아리물", "해물", "풀문석", "길숫", "밀구", "연극", "무거", "연기", "물건"
  ],
  36: [
    "옷수", "지수", "물고기", "여러", "사무",
    "너무", "상다릭", "시계", "수양", "출국"
  ],
  37: [
    "밥상", "꼬로", "거도", "반도", "숫자", "조도", "송규다",
    "초롱다", "거수", "이동", "사이", "명함", "고기", "구경"
  ],
  38: [
    "옷스", "복", "국회", "물국", "숭고", "여러", "여관", "록색명",
    "올려", "국레", "놀사리", "시고", "돌파", "옐", "물건"
  ],
  39: [
    "복권", "모리", "기름질", "긴난주", "찌구", "술로주",
    "고구다", "니콜라", "치라", "장고, 스테이크", "구수", "여구"
  ],
  40: [
    "잠", "푸른마", "사례", "고무저", "손목", "무루",
    "오도남님", "여러", "전", "도적", "스켓기, 도끼키", "여구", "스톰"
  ],
  41: [
    "후", "도광", "농무", "기구", "사무", "칠조", "가져",
    "옷고", "커", "손전등", "물놀이", "곳굳로"
  ],
  42: [
    "사과", "술", "여러", "밥", "셰이", "기구",
    "토스트", "우유", "프루트", "김건", "시금", "옆구", "름디", "물거"
  ],
  43: [
    "손자", "검사숨", "거부", "너무", "브로", "국가", "관리",
    "근로스", "살다", "고기구", "곰비", "물거"
  ],
  44: [
    "정기", "냄비", "셔츠", "슬모", "미치", "여러", "노려",
    "고걸기", "속수", "숙모", "곰미", "시도", "물거니"
  ],
  45: [
    "로또", "도스", "기름", "여기", "지구본",
    "무한", "고르", "나둘", "손물", "물수", "고무"
  ]
};

/**
 * 꿈 내용에서 키워드를 찾아 해당하는 로또 번호들을 반환
 * @param dreamText 사용자가 입력한 꿈 내용
 * @returns 매칭된 로또 번호 배열
 */
export function extractNumbersFromDream(dreamText: string): number[] {
  const matchedNumbers = new Set<number>();
  const lowerDreamText = dreamText.toLowerCase().replace(/\s/g, '');

  // 각 번호의 키워드들을 확인
  Object.entries(dreamKeywords).forEach(([number, keywords]) => {
    keywords.forEach(keyword => {
      const lowerKeyword = keyword.toLowerCase().replace(/\s/g, '');
      if (lowerDreamText.includes(lowerKeyword)) {
        matchedNumbers.add(parseInt(number));
      }
    });
  });

  return Array.from(matchedNumbers).sort((a, b) => a - b);
}

/**
 * 매칭된 번호들로부터 로또 세트 생성 (6개 번호)
 * @param matchedNumbers 꿈 해몽으로 매칭된 번호들
 * @param setCount 생성할 세트 개수
 * @returns 로또 번호 세트 배열
 */
export function generateLottoSetsFromDream(
  matchedNumbers: number[], 
  setCount: number = 1
): number[][] {
  const sets: number[][] = [];
  
  if (matchedNumbers.length === 0) {
    // 매칭된 번호가 없으면 랜덤 생성
    return generateRandomSets(setCount);
  }

  for (let i = 0; i < setCount; i++) {
    const set: number[] = [];
    const availableNumbers = [...matchedNumbers];

    // 매칭된 번호에서 우선 선택
    while (set.length < 6 && availableNumbers.length > 0) {
      const randomIndex = Math.floor(Math.random() * availableNumbers.length);
      set.push(availableNumbers[randomIndex]);
      availableNumbers.splice(randomIndex, 1);
    }

    // 6개가 안 되면 나머지를 랜덤으로 채움
    while (set.length < 6) {
      const randomNum = Math.floor(Math.random() * 45) + 1;
      if (!set.includes(randomNum)) {
        set.push(randomNum);
      }
    }

    sets.push(set.sort((a, b) => a - b));
  }

  return sets;
}

/**
 * 완전 랜덤 로또 번호 세트 생성
 */
function generateRandomSets(setCount: number): number[][] {
  const sets: number[][] = [];
  
  for (let i = 0; i < setCount; i++) {
    const set: number[] = [];
    while (set.length < 6) {
      const randomNum = Math.floor(Math.random() * 45) + 1;
      if (!set.includes(randomNum)) {
        set.push(randomNum);
      }
    }
    sets.push(set.sort((a, b) => a - b));
  }

  return sets;
}
